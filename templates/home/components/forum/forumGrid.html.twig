<div class="single">
	<div class="head">
		<div class="avatar">
			<img src="{{ pub.user.image is not empty ? pub.user.image : asset('images/cours/person.jpg') }}" alt="User Avatar">

		</div>
		<div class="infos">
			<div class="username">
				{{ pub.user.username }}
			</div>
			<a href="{{ path('home_forum_single_publication' ,{idPub:pub.id} )}}" class="date">{{ pub.dateCreation|date('d/m/Y') }}</a>

		</div>
		{# //FIXME:userId=18 #}
		{% if pub.user.id == 18 %}

			<div class="options">


				<div class="dropdown dropstart">
					<div class="drop_btn" data-bs-toggle="dropdown">
						<i class="fa-solid fa-ellipsis-v"></i>
					</div>

					<ul class="dropdown-menu">
						<li>
							<a class="dropdown-item" href="#">Modifier</a>
						</li>
						<li>
							<a class="dropdown-item" href="{{ path('home_forum_delete_publication', {'idPub': pub.id}) }}" onclick="return confirm('Are you sure you want to delete this publication?');">Supprimer</a>
						</li>
					</ul>
				</div>
			</div>
		{% endif %}

	</div>

	<div class="content">
		<div class="title">
			<b>{{ pub.titre }}</b>
		</div>
		{% if pub.images is not empty %}
			<div class="img_list">
				{% set images = pub.images|split(';') %}
				{% for image in images %}
					<div class="single_img">
						<img src="{{ image }}" alt="Image">
					</div>
				{% endfor %}
			</div>
		{% endif %}
		<div class="question">
			<p>{{ pub.contenu }}</p>

		</div>

	</div>


	<div class="infos">
		<div class="reactions">
			<div class="single_reaction">
				<div class="icon like">
					<i class="fa-solid fa-thumbs-up"></i>
					<!--  <i class="fa-regular fa-thumbs-up"></i> -->
				</div>
				<div class="counting">15</div>
				<div class="txt">J'aime</div>
			</div>
			<div class="single_reaction">
				<div class="icon dislike">
					<i class="fa-regular fa-thumbs-down"></i>
				</div>
				<div class="counting">8</div>
				<div class="txt">Je n'aime pas</div>
			</div>
			<a href="{{ path('home_forum_single_publication' ,{idPub:pub.id} )}}" class="single_reaction">
				<div class="icon comment">

					<i class="fa-regular fa-message"></i>
				</div>
				{% set commentCount = pub.getCommentaires()|length %}
				<div class="counting">{{commentCount}}</div>
				<div class="txt">
					{% if commentCount == 1 or commentCount ==0 %}
						commentaire
					{% else %}
						commentaires
					{% endif %}
				</div>

			</a>

		</div>

	</div>

	<div class="list_comments">
		{% for commentaire in pub.getCommentaires() %}
			{% include 'home/components/forum/singleComment.html.twig' with {'comment': commentaire} %}
		{% else %}
			<div class="single_comment">No comments found!</div>
		{% endfor %}
		<div class=" single_comment add">
			<div class="avatar">
				<img src="{{ asset('images/cours/person.jpg') }}" alt="">
			</div>
			<div class="content">
				<div class="top">
					<div class="username">Shaheenj</div>
					<div class="date">Il y'a 10 jours</div>

				</div>
				<div class="new_comment">
					<div class="comment">
						<textarea class="form-control" placeholder="comment" rows="2"></textarea>
					</div>
					<div class="sub">
						<button class="btn_main">Ajouter</button>
					</div>
				</div>

			</div>


		</div>

	</div>
</div>
